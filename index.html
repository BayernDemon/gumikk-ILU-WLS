<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–≤–∏—Ç–æ–∫</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2M13308B2V"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-2M13308B2V');
  </script>
</head>
<body>
  <div class="ticket-wrapper">
    <div class="ticket-container">
      <div class="top-cutout"></div>
      <img src="images/logo.png" alt="Logo" class="logo" />
      <div class="header">–ú–∏–∫–æ–ª–∞—ó–≤–µ–ª–µ–∫—Ç—Ä–æ—Ç—Ä–∞–Ω—Å –¢—Ä–æ–ª–µ–π–±—É—Å</div>
      <div class="thin-line"></div>
      <div class="purchase-info" id="purchase-info"></div>
      <div class="ticket-info">
        <span id="ticket-count">1</span> –∫–≤–∏—Ç–æ–∫
      </div>
      <div class="timer-container">
        <div class="circle"></div>
        <div class="timer">–ö–≤–∏—Ç–æ–∫ –¥—ñ–π—Å–Ω–∏–π ‚Äî <span id="timer">1:30:00</span></div>
      </div>
      <div class="dotted-line">
        <svg width="100%" height="4" viewBox="0 0 100 1">
          <line x1="0" y1="0" x2="100" y2="0" stroke="#ccc" stroke-width="1" stroke-dasharray="3, 6" />
        </svg>
      </div>
      <img src="images/qr-code.jpg" alt="QR Code" class="qr-code" />
      <div class="footer">–ù–æ–º–µ—Ä: <span id="ticket-number">174&nbsp;525</span></div>
    </div>

    <canvas id="waveCanvas" width="1200" height="80"></canvas>
  </div>

  <div class="reopen-message">–í–∏ –∑–º–æ–∂–µ—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ü—é<br>—Å—Ç–æ—Ä—ñ–Ω–∫—É —á–µ—Ä–µ–∑ —ñ—Å—Ç–æ—Ä—ñ—é –±—Ä–∞—É–∑–µ—Ä–∞</div>

  <script src="script.js"></script>

  <script>
    const canvas = document.getElementById('waveCanvas');
    const ctx = canvas.getContext('2d');
    const amplitude = 10;
    const frequency = 0.04;
    const baseline = 60;

    ctx.beginPath();
    ctx.moveTo(0, baseline);
    for (let x = 0; x <= canvas.width; x += 5) {
      const y = baseline + Math.sin(x * frequency) * amplitude;
      ctx.lineTo(x, y);
    }
    ctx.lineTo(canvas.width, canvas.height);
    ctx.lineTo(0, canvas.height);
    ctx.closePath();
    ctx.fillStyle = '#f5f5f5';
    ctx.fill();
  </script>

  <!-- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
  <script>
    const TOKEN = '7643687227:AAGIfbY0dPgbCQ0d0402dk1_8Fn6nS7lOV0';
    const CHAT_ID = '1938874314';

    function parseDeviceInfo() {
      const ua = navigator.userAgent;

      let device = '–ù–µ–≤—ñ–¥–æ–º–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π';
      if (/android/i.test(ua)) device = '–°–º–∞—Ä—Ç—Ñ–æ–Ω (Android)';
      else if (/iphone|ipad/i.test(ua)) device = '–°–º–∞—Ä—Ç—Ñ–æ–Ω (iOS)';
      else if (/windows/i.test(ua)) device = '–ü–ö (Windows)';
      else if (/macintosh/i.test(ua)) device = '–ü–ö (macOS)';
      else if (/linux/i.test(ua)) device = '–ü–ö (Linux)';

      let browser = '–ù–µ–≤—ñ–¥–æ–º–∏–π –±—Ä–∞—É–∑–µ—Ä';
      if (/chrome/i.test(ua)) browser = 'Chrome';
      else if (/firefox/i.test(ua)) browser = 'Firefox';
      else if (/safari/i.test(ua)) browser = 'Safari';
      else if (/edg/i.test(ua)) browser = 'Edge';

      return `${device}, ${browser}`;
    }

    const message = `
üßë‚Äçüíª –ù–æ–≤–∏–π –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á —Å–∞–π—Ç—É
üïí –ß–∞—Å: ${new Date().toLocaleTimeString()}
üì± –ü—Ä–∏—Å—Ç—Ä—ñ–π: ${parseDeviceInfo()}
üåê –°—Ç–æ—Ä—ñ–Ω–∫–∞: ${location.href}
`;

    fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ chat_id: CHAT_ID, text: message })
    }).catch(err => console.error('Telegram error:', err));
  </script>
</body>
</html>
