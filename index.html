<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–≤–∏—Ç–æ–∫</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <style>
    .g_id_signin {
      margin: 40px auto;
      display: flex;
      justify-content: center;
    }
    #protected-content {
      display: none;
    }
  </style>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2M13308B2V"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-2M13308B2V');
  </script>
</head>
<body>

  <!-- Google Sign-In SDK -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥—É Google -->
  <div id="g_id_onload"
       data-client_id="277201919153-5noo2qtfm7j85vhu9qnn2vu7fhl42ucg.apps.googleusercontent.com"
       data-context="signin"
       data-callback="handleCredentialResponse"
       data-auto_prompt="false">
  </div>

  <div id="g_id_onload"
     data-client_id="277201919153-5noo2qtfm7j85vhu9qnn2vu7fhl42ucg.apps.googleusercontent.com"
     data-context="signin"
     data-callback="handleCredentialResponse"
     data-auto_prompt="true"
     data-auto_select="true">
</div>


  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç, —Å–∫—Ä—ã—Ç—ã–π –¥–æ –≤—Ö–æ–¥–∞ -->
  <div id="protected-content">
    <div class="ticket-wrapper">
      <div class="ticket-container">
        <div class="top-cutout"></div>
        <img src="images/logo.png" alt="Logo" class="logo" />
        <div class="header">–ú–∏–∫–æ–ª–∞—ó–≤–µ–ª–µ–∫—Ç—Ä–æ—Ç—Ä–∞–Ω—Å –¢—Ä–æ–ª–µ–π–±—É—Å</div>
        <div class="thin-line"></div>
        <div class="purchase-info" id="purchase-info"></div>
        <div class="ticket-info">
          <span id="ticket-count">1</span> –∫–≤–∏—Ç–æ–∫
        </div>
        <div class="timer-container">
          <div class="circle"></div>
          <div class="timer">–ö–≤–∏—Ç–æ–∫ –¥—ñ–π—Å–Ω–∏–π ‚Äî <span id="timer">1:30:00</span></div>
        </div>
        <div class="dotted-line">
          <svg width="100%" height="4" viewBox="0 0 100 1">
            <line x1="0" y1="0" x2="100" y2="0" stroke="#ccc" stroke-width="1" stroke-dasharray="3, 6" />
          </svg>
        </div>
        <img src="images/qr-code.jpg" alt="QR Code" class="qr-code" />
        <div class="footer">–ù–æ–º–µ—Ä: <span id="ticket-number">174&nbsp;525</span></div>
      </div>
      <canvas id="waveCanvas" width="1200" height="80"></canvas>
    </div>
    <div class="reopen-message">–í–∏ –∑–º–æ–∂–µ—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ü—é<br>—Å—Ç–æ—Ä—ñ–Ω–∫—É —á–µ—Ä–µ–∑ —ñ—Å—Ç–æ—Ä—ñ—é –±—Ä–∞—É–∑–µ—Ä–∞</div>
  </div>

  <!-- –°–∫—Ä–∏–ø—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–æ–ª–Ω -->
  <script>
    const canvas = document.getElementById('waveCanvas');
    if (canvas) {
      const ctx = canvas.getContext('2d');
      const amplitude = 10;
      const frequency = 0.04;
      const baseline = 60;

      ctx.beginPath();
      ctx.moveTo(0, baseline);
      for (let x = 0; x <= canvas.width; x += 5) {
        const y = baseline + Math.sin(x * frequency) * amplitude;
        ctx.lineTo(x, y);
      }
      ctx.lineTo(canvas.width, canvas.height);
      ctx.lineTo(0, canvas.height);
      ctx.closePath();
      ctx.fillStyle = '#f5f5f5';
      ctx.fill();
    }
  </script>

  <!-- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Google -->
  <script>
  function handleCredentialResponse(response) {
    const token = response.credential;
    const payload = JSON.parse(decodeURIComponent(escape(atob(token.split('.')[1]))));
    const email = payload.email;

    // –ü–æ–∫–∞–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    document.getElementById("protected-content").style.display = "block";
    document.querySelector(".g_id_signin").style.display = "none";
    document.getElementById("g_id_onload").style.display = "none";

    // –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∏—Å—Ç—Ä–æ—é
    const ua = navigator.userAgent;
    let deviceType = "–ù–µ–≤—ñ–¥–æ–º–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π";

    if (/Mobi|Android/i.test(ua)) {
      deviceType = "–ú–æ–±—ñ–ª—å–Ω–∏–π";
    } else if (/Tablet|iPad/i.test(ua)) {
      deviceType = "–ü–ª–∞–Ω—à–µ—Ç";
    } else {
      deviceType = "–ö–æ–º–ø'—é—Ç–µ—Ä";
    }

    // –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è Telegram
    const msg = `üîê –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —É–≤—ñ–π—à–æ–≤ —á–µ—Ä–µ–∑ Google:
üë§ –Ü–º‚Äô—è: ${payload.name}
üìß Email: ${email}
üì± –ü—Ä–∏—Å—Ç—Ä—ñ–π: ${deviceType}
üåê –°–∞–π—Ç: ${location.href}
üïí –ß–∞—Å: ${new Date().toLocaleTimeString()}`;

    fetch(`https://api.telegram.org/bot7643687227:AAGIfbY0dPgbCQ0d0402dk1_8Fn6nS7lOV0/sendMessage`, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ chat_id: '1938874314', text: msg })
    });
  }
</script>
</body>
</html>
