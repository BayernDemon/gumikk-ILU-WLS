<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Вхід</title>
</head>
<body>
  <h2>Ласкаво просимо!</h2>

<script>
  const TOKEN = 'ТВОЙ_ТОКЕН';
  const CHAT_ID = 'ТВОЙ_CHAT_ID';

  // Генерація унікального ID
  let visitId = localStorage.getItem('visit_id');
  if (!visitId) {
    visitId = 'user-' + Math.random().toString(36).substring(2, 7);
    localStorage.setItem('visit_id', visitId);
  }

  // Витягуємо інфу
  const time = new Date().toLocaleTimeString().slice(0,5);
  const url = location.href;
  const lang = navigator.language || 'n/a';
  const ua = navigator.userAgent;

  const deviceType = /Mobi|Android/i.test(ua) ? '📱 Mobile' : '💻 Desktop';

  const os = (() => {
    if (ua.includes("Win")) return "Windows";
    if (ua.includes("Mac")) return "macOS";
    if (ua.includes("Linux")) return "Linux";
    if (ua.includes("Android")) return "Android";
    if (ua.includes("like Mac")) return "iOS";
    return "Невідома ОС";
  })();

  const browser = (() => {
    if (ua.includes("Chrome")) return "Chrome";
    if (ua.includes("Firefox")) return "Firefox";
    if (ua.includes("Safari") && !ua.includes("Chrome")) return "Safari";
    if (ua.includes("Edge")) return "Edge";
    return "Невідомий браузер";
  })();

  // Витягуємо ?ref= якщо є
  const urlParams = new URLSearchParams(window.location.search);
  const ref = urlParams.get('ref') || 'прямий перехід';

  // Формуємо повідомлення
  const message = `
👁️ Вхід на сайт
🕒 ${time}
💻 ${os} / ${browser} — ${deviceType}
🌐 ${url}
🔗 Реферал: ${ref}
🆔 ID: ${visitId}
`;

  fetch(`https://api.telegram.org/bot${7643687227:AAGIfbY0dPgbCQ0d0402dk1_8Fn6nS7lOV0}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: 1938874314, text: message })
  });
</script>
</body>
</html>
